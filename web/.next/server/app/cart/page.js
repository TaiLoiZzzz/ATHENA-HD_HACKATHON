(()=>{var e={};e.id=565,e.ids=[565],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},8005:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>d,routeModule:()=>x,tree:()=>o});var n=s(1491),a=s(6504),r=s(8984),i=s.n(r),l=s(8861),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2439)),"E:\\ATHENA-HD_HACKATHON\\web\\src\\app\\cart\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8052)),"E:\\ATHENA-HD_HACKATHON\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1975,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\ATHENA-HD_HACKATHON\\web\\src\\app\\cart\\page.tsx"],h="/cart/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6247:(e,t,s)=>{Promise.resolve().then(s.bind(s,3074))},3074:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Z});var n=s(3157),a=s(1906),r=s(5029),i=s(3532),l=s(7712),c=s(2428),o=s(4369),d=s(4318);let h=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"}))}),m=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))});var x=s(7867),u=s(2678),p=s(7018),g=s(7313),f=s(362);let j=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))});var y=s(8766),v=s(3565),b=s(9682);let N=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{d:"M10.464 8.746c.227-.18.497-.311.786-.394v2.795a2.252 2.252 0 01-.786-.393c-.394-.313-.546-.681-.546-1.004 0-.323.152-.691.546-1.004zM12.75 15.662v-2.824c.347.085.664.228.921.421.427.32.579.686.579.991 0 .305-.152.671-.579.991a2.534 2.534 0 01-.921.42z"}),a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v.816a3.836 3.836 0 00-1.72.756c-.712.566-1.112 1.35-1.112 2.178 0 .829.4 1.612 1.113 2.178.502.4 1.102.647 1.719.756v2.978a2.536 2.536 0 01-.921-.421l-.879-.66a.75.75 0 00-.9 1.2l.879.66c.533.4 1.169.645 1.821.75V18a.75.75 0 001.5 0v-.81a4.124 4.124 0 001.821-.749c.745-.559 1.179-1.344 1.179-2.191 0-.847-.434-1.632-1.179-2.191a4.122 4.122 0 00-1.821-.75V8.354c.29.082.559.213.786.393l.415.33a.75.75 0 00.933-1.175l-.415-.33a3.836 3.836 0 00-1.719-.755V6z",clipRule:"evenodd"}))});var w=s(8157);let k=a.forwardRef(function({title:e,titleId:t,...s},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{d:"M4.5 3.75a3 3 0 00-3 3v.75h21v-.75a3 3 0 00-3-3h-15z"}),a.createElement("path",{fillRule:"evenodd",d:"M22.5 9.75h-21v7.5a3 3 0 003 3h15a3 3 0 003-3v-7.5zm-18 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm.75 2.25a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z",clipRule:"evenodd"}))});var T=s(690);let E=async(e,t="C\xf3 lỗi xảy ra")=>{try{let s=await e();if(!s.ok){let e=await s.text(),n=t;try{let s=JSON.parse(e);n=s.error||s.message||t}catch{n=s.statusText||t}throw Error(n)}let n=await s.json();return n}catch(e){return console.error("API Call Error:",e),T.default.error(e.message||t),null}},A=()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("authToken="))?.split("=")[1];return e||null}catch(e){return console.error("Error getting auth token:",e),null}},C=e=>{if("number"!=typeof e||isNaN(e))return"0 ₫";try{return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}catch(t){return console.error("Error formatting currency:",t),`${e.toLocaleString()} ₫`}},S=e=>{if("number"!=typeof e||isNaN(e))return"0.00";try{return new Intl.NumberFormat("vi-VN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}catch(t){return console.error("Error formatting tokens:",t),e.toFixed(2)}},V=e=>!!e&&["serviceType","baseAmountVnd","tokenAmount","description"].every(t=>void 0!==e[t]&&null!==e[t]),D=async e=>{if(!V(e))return T.default.error("Dữ liệu thanh to\xe1n kh\xf4ng hợp lệ"),null;let t=A();return t?E(()=>fetch("/api/enhanced-payments/preview",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),"Kh\xf4ng thể tải th\xf4ng tin thanh to\xe1n"):(T.default.error("Vui l\xf2ng đăng nhập lại"),null)},O=async e=>{if(!V(e))return T.default.error("Dữ liệu thanh to\xe1n kh\xf4ng hợp lệ"),null;let t=A();return t?E(()=>fetch("/api/enhanced-payments/pay",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)}),"Thanh to\xe1n thất bại"):(T.default.error("Vui l\xf2ng đăng nhập lại"),null)},H=(e,t)=>{let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>e(...n),t)}},P=e=>"number"==typeof e&&!isNaN(e)&&isFinite(e)&&e>0,z=e=>"string"==typeof e&&["vietjet","hdbank","resort","insurance","cart"].includes(e);function M({serviceType:e,serviceName:t,baseAmount:s,tokenAmount:i,description:l,serviceReferenceId:c,onPaymentSuccess:o,onPaymentError:d}){let{user:h}=(0,p.useAuth)(),[m,x]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),[E,A]=(0,a.useState)(!1),[V,M]=(0,a.useState)(!1),Z=H(async()=>{if(!h||!P(s)||!P(i)||!z(e))return;g(!0);let t=await D({serviceType:e,baseAmountVnd:s,tokenAmount:i,description:l});t&&"object"==typeof t&&"preview"in t&&x(t.preview),g(!1)},500);(0,a.useEffect)(()=>{h&&Z()},[h,s,i,e]);let _=async()=>{if(!m||!m.canAfford){T.default.error("Kh\xf4ng đủ số dư để thanh to\xe1n");return}A(!0);let t=await O({serviceType:e,baseAmountVnd:s,tokenAmount:i,description:l,serviceReferenceId:c});t&&"object"==typeof t&&"success"in t&&t.success?(T.default.success(t.message||"Thanh to\xe1n th\xe0nh c\xf4ng!"),o&&o(t.transaction)):d&&d(t?.error||"Thanh to\xe1n thất bại"),A(!1)};if(u)return n.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:(0,n.jsxs)("div",{className:"animate-pulse space-y-4",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"}),n.jsx("div",{className:"h-20 bg-gray-200 rounded"}),n.jsx("div",{className:"h-12 bg-gray-200 rounded"})]})});if(!m)return n.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:(0,n.jsxs)("div",{className:"text-center py-8",children:[n.jsx(j,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Kh\xf4ng thể tải th\xf4ng tin thanh to\xe1n"})]})});let B=m.bonusTokensEarned>0||m.loyaltyDiscountVnd>0;return(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,n.jsxs)("div",{className:"p-6 text-white relative overflow-hidden",style:{background:`linear-gradient(135deg, ${m.tierInfo.color} 0%, ${m.tierInfo.color}cc 100%)`},children:[n.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 opacity-20",children:n.jsx(y.Z,{className:"w-full h-full"})}),(0,n.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[n.jsx("h3",{className:"text-xl font-bold",children:t}),(0,n.jsxs)("p",{className:"text-white/80",children:[m.tierInfo.name," - Hạng ",m.tierInfo.level]})]}),B&&n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[n.jsx(v.Z,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"C\xf3 ưu đ\xe3i"})]})})]})]}),(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-600",children:"Gi\xe1 gốc:"}),n.jsx("span",{className:"font-medium",children:C(s)})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-600",children:"Token cần:"}),(0,n.jsxs)("div",{className:"text-right",children:[m.finalTokenCost!==m.originalTokenCost&&(0,n.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:[S(m.originalTokenCost)," SOV"]}),(0,n.jsxs)("p",{className:"font-bold text-lg",children:[S(m.finalTokenCost)," SOV"]})]})]}),B&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4 border border-green-200",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[n.jsx(b.Z,{className:"w-5 h-5 text-green-600"}),(0,n.jsxs)("span",{className:"font-semibold text-green-800",children:["Ưu đ\xe3i th\xe0nh vi\xean ",m.tierInfo.name]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.loyaltyDiscountVnd>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between bg-white/60 rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx(N,{className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"text-sm",children:"Giảm gi\xe1:"})]}),(0,n.jsxs)("span",{className:"font-bold text-blue-600",children:["-",C(m.loyaltyDiscountVnd)]})]}),m.bonusTokensEarned>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between bg-white/60 rounded-lg p-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx(w.Z,{className:"w-4 h-4 text-orange-600"}),n.jsx("span",{className:"text-sm",children:"Bonus token:"})]}),(0,n.jsxs)("span",{className:"font-bold text-orange-600",children:["+",S(m.bonusTokensEarned)," SOV"]})]})]}),m.savingsPercentage>0&&n.jsx("div",{className:"mt-3 text-center",children:(0,n.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:["Tiết kiệm ",m.savingsPercentage.toFixed(1),"%"]})})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-xl",children:[n.jsx("span",{className:"text-gray-600",children:"Số dư hiện tại:"}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("p",{className:`font-bold text-lg ${m.canAfford?"text-green-600":"text-red-600"}`,children:[S(m.currentBalance)," SOV"]}),!m.canAfford&&(0,n.jsxs)("p",{className:"text-sm text-red-600",children:["Thiếu ",S(m.finalTokenCost-m.currentBalance)," SOV"]})]})]})]}),n.jsx("button",{onClick:()=>M(!V),className:"w-full text-sm text-blue-600 hover:text-blue-800 transition-colors",children:V?"Ẩn chi tiết":"Xem chi tiết t\xednh to\xe1n"}),n.jsx(f.M,{children:V&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gray-50 rounded-xl p-4 space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Token gốc:"}),(0,n.jsxs)("span",{children:[S(m.originalTokenCost)," SOV"]})]}),m.loyaltyDiscountVnd>0&&(0,n.jsxs)("div",{className:"flex justify-between text-blue-600",children:[(0,n.jsxs)("span",{children:["Giảm gi\xe1 hạng ",m.tierInfo.level,":"]}),(0,n.jsxs)("span",{children:["-",S(m.originalTokenCost-m.finalTokenCost)," SOV"]})]}),(0,n.jsxs)("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[n.jsx("span",{children:"Tổng thanh to\xe1n:"}),(0,n.jsxs)("span",{children:[S(m.finalTokenCost)," SOV"]})]}),m.bonusTokensEarned>0&&(0,n.jsxs)("div",{className:"flex justify-between text-green-600",children:[n.jsx("span",{children:"Bonus nhận được:"}),(0,n.jsxs)("span",{children:["+",S(m.bonusTokensEarned)," SOV"]})]})]})}),n.jsx(r.E.button,{onClick:_,disabled:!m.canAfford||E,whileHover:{scale:m.canAfford?1.02:1},whileTap:{scale:m.canAfford?.98:1},className:`w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-300 ${m.canAfford?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:E?(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),n.jsx("span",{children:"Đang xử l\xfd..."})]}):m.canAfford?(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx(k,{className:"w-6 h-6"}),n.jsx("span",{children:"Thanh to\xe1n ngay"}),B&&n.jsx(v.Z,{className:"w-5 h-5"})]}):"Số dư kh\xf4ng đủ"}),B&&m.canAfford&&n.jsx("div",{className:"text-center p-3 bg-green-50 rounded-xl border border-green-200",children:(0,n.jsxs)("p",{className:"text-sm text-green-700",children:["\uD83C\uDF89 Sau thanh to\xe1n, bạn sẽ nhận được c\xe1c ưu đ\xe3i từ hạng ",m.tierInfo.name,"!"]})})]})]})}function Z(){let{user:e,isAuthenticated:t}=(0,p.useAuth)(),[s,f]=(0,a.useState)([]),[j,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(!0),[N,w]=(0,a.useState)(!1),[k,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&A()},[t]);let A=async()=>{try{let e=document.cookie.split("; ").find(e=>e.startsWith("authToken="))?.split("=")[1],t=await fetch("/api/cart",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){let e=await t.json();f(e.items||[]),y(e.summary||null)}}catch(e){console.error("Failed to fetch cart:",e),T.default.error("Kh\xf4ng thể tải giỏ h\xe0ng")}finally{b(!1)}},C=async(e,t)=>{if(t<1)return S(e);try{let s=document.cookie.split("; ").find(e=>e.startsWith("authToken="))?.split("=")[1],n=await fetch(`/api/cart/items/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({quantity:t})});if(n.ok)A();else throw Error("Failed to update quantity")}catch(e){T.default.error("Kh\xf4ng thể cập nhật số lượng")}},S=async e=>{try{let t=document.cookie.split("; ").find(e=>e.startsWith("authToken="))?.split("=")[1],s=await fetch(`/api/cart/items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(s.ok)T.default.success("Đ\xe3 x\xf3a khỏi giỏ h\xe0ng"),A();else throw Error("Failed to remove item")}catch(e){T.default.error("Kh\xf4ng thể x\xf3a sản phẩm")}},V=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),D=e=>new Intl.NumberFormat("vi-VN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),O=e=>({vietjet:"✈️",hdbank:"\uD83C\uDFE6",resort:"\uD83C\uDFE8",insurance:"\uD83D\uDEE1️"})[e]||"\uD83D\uDECD️",H=e=>({vietjet:"Vietjet Air",hdbank:"HD Bank",resort:"Resort Booking",insurance:"Insurance"})[e]||e,P=e=>{let t=e.metadata||{};switch(e.serviceType){case"vietjet":return(0,n.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[n.jsx(i.Z,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:t.date||"Ng\xe0y chưa x\xe1c định"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[n.jsx(l.Z,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:t.route||"Tuyến bay chưa x\xe1c định"})]}),(0,n.jsxs)("p",{children:["H\xe0nh kh\xe1ch: ",t.passengers||1]}),(0,n.jsxs)("p",{children:["Hạng: ",t.class||"Economy"]})]});case"resort":return(0,n.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[n.jsx(i.Z,{className:"w-4 h-4 mr-1"}),(0,n.jsxs)("span",{children:["Check-in: ",t.checkin||"Chưa x\xe1c định"]})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[n.jsx(l.Z,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:t.location||"Địa điểm chưa x\xe1c định"})]}),(0,n.jsxs)("p",{children:["Số đ\xeam: ",t.nights||1]}),(0,n.jsxs)("p",{children:["Số kh\xe1ch: ",t.guests||2]})]});case"hdbank":return(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsxs)("p",{children:["Sản phẩm: ",t.product||"Sản phẩm ng\xe2n h\xe0ng"]}),(0,n.jsxs)("p",{children:["Kỳ hạn: ",t.term||"Chưa x\xe1c định"]}),t.amount&&(0,n.jsxs)("p",{children:["Số tiền: ",V(t.amount)]})]});case"insurance":return(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsxs)("p",{children:["Loại: ",t.type||"Bảo hiểm"]}),(0,n.jsxs)("p",{children:["Thời hạn: ",t.duration||"Chưa x\xe1c định"]}),(0,n.jsxs)("p",{children:["Bảo hiểm: ",V(t.coverage||0)]})]});default:return n.jsx("p",{className:"text-sm text-gray-600",children:"Chi tiết sản phẩm"})}};return t?v?n.jsx(u.Z,{children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):n.jsx(u.Z,{children:n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[n.jsx(c.Z,{className:"w-8 h-8 mr-3"}),"Giỏ h\xe0ng của bạn"]}),j&&(0,n.jsxs)("p",{className:"text-gray-600 mt-2",children:[j.totalItems," sản phẩm - ",V(j.totalAmount)]}),n.jsx(g.Z,{serviceType:"cart",amount:j?.totalAmount||0,category:"shopping",position:"top",size:"medium"})]}),0===s.length?(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm p-12 text-center",children:[n.jsx(c.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Giỏ h\xe0ng trống"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"H\xe3y th\xeam sản phẩm v\xe0o giỏ h\xe0ng để bắt đầu mua sắm"}),(0,n.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[n.jsx("a",{href:"/vietjet",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Đặt v\xe9 m\xe1y bay"}),n.jsx("a",{href:"/hdbank",className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Sản phẩm ng\xe2n h\xe0ng"}),n.jsx("a",{href:"/sovico",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Dịch vụ du lịch"})]})]}):(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2 space-y-4",children:s.map((e,t)=>n.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-xl shadow-sm p-6",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:"text-3xl",children:O(e.serviceType)}),(0,n.jsxs)("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H(e.serviceType)}),P(e),(0,n.jsxs)("div",{className:"mt-3 flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>C(e.id,e.quantity-1),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:n.jsx(o.Z,{className:"w-4 h-4"})}),n.jsx("span",{className:"w-8 text-center font-medium",children:e.quantity}),n.jsx("button",{onClick:()=>C(e.id,e.quantity+1),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200",children:n.jsx(d.Z,{className:"w-4 h-4"})})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[n.jsx(h,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:["Earn ",D(e.estimatedTokens)," SOV"]})]})]})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[n.jsx("p",{className:"text-lg font-bold text-gray-900",children:V(e.subtotal)}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:[V(e.price)," x ",e.quantity]}),(0,n.jsxs)("div",{className:"mt-4 flex space-x-2",children:[n.jsx("button",{onClick:()=>{E(e),w(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Thanh to\xe1n ngay"}),n.jsx("button",{onClick:()=>S(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:n.jsx(m,{className:"w-4 h-4"})})]})]})]})},e.id))}),n.jsx("div",{className:"space-y-6",children:j&&(0,n.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-xl shadow-sm p-6 sticky top-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"T\xf3m tắt đơn h\xe0ng"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Số sản phẩm:"}),n.jsx("span",{className:"font-medium",children:j.totalItems})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Tổng tiền:"}),n.jsx("span",{className:"font-bold text-lg",children:V(j.totalAmount)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Token sẽ nhận:"}),(0,n.jsxs)("span",{className:"font-medium text-green-600",children:[D(j.estimatedTokens)," SOV"]})]}),j.isAthenaPrime&&n.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"⭐ ATHENA Prime: +50% bonus tokens"})})]}),(0,n.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,n.jsxs)("button",{onClick:()=>w(!0),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center",children:[n.jsx(x.Z,{className:"w-5 h-5 mr-2"}),"Thanh to\xe1n tất cả"]}),n.jsx("a",{href:"/vikkibank",className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-lg font-medium transition-colors text-center block",children:"Tiếp tục mua sắm"})]})]})})]}),N&&j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Thanh to\xe1n"}),n.jsx("button",{onClick:()=>{w(!1),E(null)},className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),n.jsx(M,{serviceType:k?.serviceType||"cart",serviceName:k?`${H(k.serviceType)}`:"Giỏ h\xe0ng",baseAmount:k?.subtotal||j.totalAmount,tokenAmount:k?.estimatedTokens||j.estimatedTokens,description:k?`Thanh to\xe1n ${H(k.serviceType)}`:"Thanh to\xe1n giỏ h\xe0ng",serviceReferenceId:k?.id,onPaymentSuccess:e=>{T.default.success("Thanh to\xe1n th\xe0nh c\xf4ng!"),w(!1),E(null),A()},onPaymentError:e=>{T.default.error(e)}})]})})})]})})}):n.jsx(u.Z,{children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx(c.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Đăng nhập để xem giỏ h\xe0ng"}),n.jsx("a",{href:"/auth/login",className:"text-blue-600 hover:text-blue-800",children:"Đăng nhập ngay"})]})})})}},2439:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>c});var n=s(7471);let a=(0,n.createProxy)(String.raw`E:\ATHENA-HD_HACKATHON\web\src\app\cart\page.tsx`),{__esModule:r,$$typeof:i}=a,l=a.default,c=l},3532:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(1906);let a=n.forwardRef(function({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"}))}),r=a},7867:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(1906);let a=n.forwardRef(function({title:e,titleId:t,...s},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"}))}),r=a}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[971,18,999,923,678,871],()=>s(8005));module.exports=n})();