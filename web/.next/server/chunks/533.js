"use strict";exports.id=533,exports.ids=[533],exports.modules={8533:(e,s,t)=>{t.d(s,{Z:()=>j});var a=t(3157),l=t(1906),r=t(5029),i=t(362),n=t(593),c=t(8766),d=t(3565),o=t(8157),x=t(9682),h=t(838);let m=l.forwardRef(function({title:e,titleId:s,...t},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":s},t),e?l.createElement("title",{id:s},e):null,l.createElement("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))});var g=t(6842),u=t(9435);let p=({iconName:e,className:s})=>{let t={user:g.Z,medal:u.Z,award:n.Z,star:c.Z,crown:n.Z,gem:d.Z},l=t[e]||c.Z;return a.jsx(l,{className:s})};function j({onTierUpdate:e}){let[s,t]=(0,l.useState)(null),[c,g]=(0,l.useState)(!0),[u,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{try{let s=document.cookie.split("; ").find(e=>e.startsWith("authToken="))?.split("=")[1],a=await fetch("/api/enhanced-payments/loyalty/dashboard",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(a.ok){let s=await a.json();t(s.dashboard),e&&e(s.dashboard.currentTier)}}catch(e){console.error("Failed to fetch loyalty data:",e)}finally{g(!1)}},b=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),v=e=>new Intl.NumberFormat("vi-VN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);if(c)return a.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),a.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})});if(!s)return a.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:a.jsx("p",{className:"text-gray-500",children:"Kh\xf4ng thể tải th\xf4ng tin hạng th\xe0nh vi\xean"})});let{currentTier:f,nextTier:y,memberStats:w,recentBenefits:k,achievementProgress:Z}=s;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative overflow-hidden rounded-2xl shadow-2xl",style:{background:`linear-gradient(135deg, ${f.color}20 0%, ${f.color}40 100%)`},children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-10",children:a.jsx(p,{iconName:f.icon,className:"w-full h-full"})}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:f.color},children:a.jsx(p,{iconName:f.icon,className:"w-8 h-8 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:f.name}),a.jsx("p",{className:"text-gray-600",children:"Hạng th\xe0nh vi\xean hiện tại"})]})]}),a.jsx("button",{onClick:()=>j(!u),className:"px-4 py-2 bg-white/80 backdrop-blur-sm rounded-lg hover:bg-white/90 transition-colors",children:u?"Ẩn chi tiết":"Xem chi tiết"})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(o.Z,{className:"w-5 h-5 text-orange-500"}),a.jsx("span",{className:"font-semibold",children:"Bonus Token"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",style:{color:f.color},children:["+",f.tokenBonusPercentage,"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Khi mua dịch vụ"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(d.Z,{className:"w-5 h-5 text-purple-500"}),a.jsx("span",{className:"font-semibold",children:"Hệ số nh\xe2n"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",style:{color:f.color},children:["x",f.bonusMultiplier]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Điểm t\xedch lũy"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(x.Z,{className:"w-5 h-5 text-green-500"}),a.jsx("span",{className:"font-semibold",children:"Ưu đ\xe3i"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",style:{color:f.color},children:[f.level-1,"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Giảm gi\xe1 theo hạng"})]})]}),"Tối đa"!==y.name&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Tiến độ l\xean hạng ",y.name]}),(0,a.jsxs)("span",{className:"text-sm font-bold",style:{color:f.color},children:[y.progress,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx(r.E.div,{initial:{width:0},animate:{width:`${y.progress}%`},transition:{duration:1,ease:"easeOut"},className:"h-3 rounded-full",style:{backgroundColor:f.color}})})]})]})]}),a.jsx(i.M,{children:u&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(h.Z,{className:"w-6 h-6 mr-2 text-blue-500"}),"Thống k\xea th\xe0nh vi\xean"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.daysAsMember}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ng\xe0y tham gia"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:b(w.totalSpent)}),a.jsx("p",{className:"text-sm text-gray-600",children:"Tổng chi ti\xeau"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:w.totalTransactions}),a.jsx("p",{className:"text-sm text-gray-600",children:"Giao dịch"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[v(w.totalBonusEarned)," SOV"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Bonus nhận được"})]})]})]}),k.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(m,{className:"w-6 h-6 mr-2 text-red-500"}),"Ưu đ\xe3i gần đ\xe2y"]}),a.jsx("div",{className:"space-y-3",children:k.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium",children:e.service?.toUpperCase()}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleDateString("vi-VN")})]}),(0,a.jsxs)("div",{className:"text-right",children:[e.bonus_tokens>0&&(0,a.jsxs)("p",{className:"text-green-600 font-bold",children:["+",v(e.bonus_tokens)," SOV"]}),e.discount>0&&(0,a.jsxs)("p",{className:"text-blue-600 font-bold",children:["-",b(e.discount)]})]})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(n.Z,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Th\xe0nh t\xedch"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Z).map(([e,s])=>(0,a.jsxs)("div",{className:`p-4 rounded-xl border-2 ${s?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full mx-auto mb-2 flex items-center justify-center ${s?"bg-green-500":"bg-gray-300"}`,children:a.jsx(n.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("p",{className:`text-sm text-center font-medium ${s?"text-green-700":"text-gray-500"}`,children:["loyalty_champion"===e&&"Nh\xe0 v\xf4 địch","early_adopter"===e&&"Người ti\xean phong","big_spender"===e&&"Kh\xe1ch VIP","frequent_user"===e&&"Người d\xf9ng t\xedch cực"]})]},e))})]})]})})]})}},838:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(1906);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75zM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 01-1.875-1.875V8.625zM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 013 19.875v-6.75z"}))}),r=l},593:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(1906);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 00-.584.859 6.753 6.753 0 006.138 5.6 6.73 6.73 0 002.743 1.346A6.707 6.707 0 019.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 00-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 00.75-.75 2.25 2.25 0 00-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 01-1.112-3.173 6.73 6.73 0 002.743-1.347 6.753 6.753 0 006.139-5.6.75.75 0 00-.585-.858 47.077 47.077 0 00-3.07-.543V2.62a.75.75 0 00-.658-.744 49.22 49.22 0 00-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 00-.657.744zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 013.16 5.337a45.6 45.6 0 012.006-.343v.256zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 01-2.863 3.207 6.72 6.72 0 00.857-3.294z",clipRule:"evenodd"}))}),r=l}};