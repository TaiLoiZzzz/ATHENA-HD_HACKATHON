"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/vikkibank/page",{

/***/ "(app-pages-browser)/./src/services/aiPersonalizationService.ts":
/*!**************************************************!*\
  !*** ./src/services/aiPersonalizationService.ts ***!
  \**************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aiPersonalizationService: function() { return /* binding */ aiPersonalizationService; }\n/* harmony export */ });\n/* __next_internal_client_entry_do_not_use__ aiPersonalizationService auto */ class AIPersonalizationService {\n    async getPersonalizedRecommendations(userProfile, newsItems, availableProducts) {\n        try {\n            const prompt = this.buildPersonalizationPrompt(userProfile, newsItems, availableProducts);\n            console.log(\"Calling Gemini API with prompt:\", prompt);\n            const response = await fetch(\"\".concat(this.baseUrl, \"?key=\").concat(this.apiKey), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    contents: [\n                        {\n                            parts: [\n                                {\n                                    text: prompt\n                                }\n                            ]\n                        }\n                    ],\n                    generationConfig: {\n                        temperature: 0.8,\n                        topK: 40,\n                        topP: 0.95,\n                        maxOutputTokens: 4096\n                    },\n                    safetySettings: [\n                        {\n                            category: \"HARM_CATEGORY_HARASSMENT\",\n                            threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                        },\n                        {\n                            category: \"HARM_CATEGORY_HATE_SPEECH\",\n                            threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                        }\n                    ]\n                })\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error(\"API Error Response:\", errorText);\n                throw new Error(\"API Error: \".concat(response.status, \" - \").concat(errorText));\n            }\n            const data = await response.json();\n            console.log(\"Gemini API Response:\", data);\n            if (!data.candidates || !data.candidates[0] || !data.candidates[0].content) {\n                throw new Error(\"Invalid API response structure\");\n            }\n            const aiResponse = data.candidates[0].content.parts[0].text;\n            console.log(\"AI Response Text:\", aiResponse);\n            return this.parseAIResponse(aiResponse, availableProducts);\n        } catch (error) {\n            console.error(\"AI Personalization Error:\", error);\n            return this.getFallbackRecommendations(userProfile, availableProducts);\n        }\n    }\n    buildPersonalizationPrompt(userProfile, newsItems, availableProducts) {\n        const newsContext = newsItems.map((item)=>\"- \".concat(item.title, \": \").concat(item.content.substring(0, 100), \"...\")).join(\"\\n\");\n        const productsContext = availableProducts.map((product)=>\"- \".concat(product.name, \" (\").concat(product.serviceType, \"): \").concat(product.price, \" VND, \").concat(product.tokenReward, \" SOV tokens, \").concat(product.category)).join(\"\\n\");\n        return \"\\nBạn l\\xe0 một AI Sales chuy\\xean nghiệp cho hệ thống ATHENA-HD. Nhiệm vụ của bạn l\\xe0 ph\\xe2n t\\xedch th\\xf4ng tin user v\\xe0 đưa ra lời khuy\\xean mua sản phẩm tối ưu h\\xf3a token.\\n\\nTH\\xd4NG TIN USER:\\n- Rank: \".concat(userProfile.rank, \" (\").concat(userProfile.membershipTier, \")\\n- Điểm: \").concat(userProfile.totalPoints, \"\\n- Token đ\\xe3 kiếm: \").concat(userProfile.totalEarned, \" SOV\\n- Token đ\\xe3 chi: \").concat(userProfile.totalSpent, \" SOV\\n- Số dư hiện tại: \").concat(userProfile.currentBalance, \" SOV\\n- ATHENA Prime: \").concat(userProfile.isAthenaPrime ? \"C\\xf3\" : \"Kh\\xf4ng\", \"\\n- Sở th\\xedch: \").concat(userProfile.preferences.join(\", \"), \"\\n\\nTIN TỨC H\\xd4M NAY:\\n\").concat(newsContext, \"\\n\\nSẢN PHẨM C\\xd3 SẴN:\\n\").concat(productsContext, '\\n\\nNHIỆM VỤ:\\n1. Ph\\xe2n t\\xedch rank v\\xe0 lịch sử giao dịch của user\\n2. Xem x\\xe9t tin tức hiện tại để đưa ra lời khuy\\xean ph\\xf9 hợp\\n3. Chọn 3-5 sản phẩm tối ưu nhất cho user\\n4. T\\xednh to\\xe1n token reward v\\xe0 ROI\\n5. Đưa ra lời khuy\\xean c\\xe1 nh\\xe2n h\\xf3a\\n\\nY\\xcaU CẦU ĐẦU RA:\\nTrả về JSON với format:\\n{\\n  \"recommendations\": [\\n    {\\n      \"productId\": \"string\",\\n      \"reason\": \"string\",\\n      \"tokenOptimization\": \"string\", \\n      \"urgency\": \"low|medium|high\",\\n      \"confidence\": 0.0-1.0,\\n      \"personalizedMessage\": \"string\",\\n      \"expectedTokens\": number,\\n      \"roi\": number\\n    }\\n  ]\\n}\\n\\nH\\xe3y đ\\xf3ng vai một sales chuy\\xean nghiệp, th\\xe2n thiện v\\xe0 đưa ra lời khuy\\xean hữu \\xedch!\\n    ');\n    }\n    parseAIResponse(aiResponse, availableProducts) {\n        try {\n            // Extract JSON from AI response\n            const jsonMatch = aiResponse.match(/\\{[\\s\\S]*\\}/);\n            if (!jsonMatch) {\n                throw new Error(\"No JSON found in AI response\");\n            }\n            const parsed = JSON.parse(jsonMatch[0]);\n            const recommendations = parsed.recommendations || [];\n            return recommendations.map((rec)=>{\n                const product = availableProducts.find((p)=>p.id === rec.productId);\n                if (!product) return null;\n                return {\n                    product,\n                    reason: rec.reason || \"AI recommendation\",\n                    tokenOptimization: rec.tokenOptimization || \"Optimized for your tier\",\n                    urgency: rec.urgency || \"medium\",\n                    confidence: rec.confidence || 0.8,\n                    personalizedMessage: rec.personalizedMessage || \"Recommended for you\",\n                    expectedTokens: rec.expectedTokens || product.tokenReward,\n                    roi: rec.roi || 0.15\n                };\n            }).filter(Boolean);\n        } catch (error) {\n            console.error(\"Error parsing AI response:\", error);\n            return [];\n        }\n    }\n    getFallbackRecommendations(userProfile, availableProducts) {\n        // Fallback logic based on user tier and preferences\n        const tierMultiplier = this.getTierMultiplier(userProfile.membershipTier);\n        return availableProducts.filter((product)=>product.tokenReward > 0).sort((a, b)=>b.tokenReward * tierMultiplier - a.tokenReward * tierMultiplier).slice(0, 3).map((product)=>({\n                product,\n                reason: \"Tối ưu cho rank \".concat(userProfile.rank),\n                tokenOptimization: \"Nhận \".concat(product.tokenReward * tierMultiplier, \" SOV tokens\"),\n                urgency: \"medium\",\n                confidence: 0.7,\n                personalizedMessage: \"Ph\\xf9 hợp với rank \".concat(userProfile.rank, \" của bạn\"),\n                expectedTokens: product.tokenReward * tierMultiplier,\n                roi: 0.12\n            }));\n    }\n    getTierMultiplier(tier) {\n        switch(tier.toLowerCase()){\n            case \"diamond\":\n                return 2.0;\n            case \"gold\":\n                return 1.5;\n            case \"silver\":\n                return 1.2;\n            case \"bronze\":\n                return 1.0;\n            default:\n                return 1.0;\n        }\n    }\n    async getNewsAnalysis() {\n        // Mock news data - in real app, this would fetch from news API\n        return [\n            {\n                title: \"VietJet Air mở rộng đường bay quốc tế\",\n                content: \"VietJet Air c\\xf4ng bố mở th\\xeam 5 đường bay quốc tế mới, tăng cơ hội du lịch v\\xe0 kinh doanh\",\n                category: \"travel\",\n                publishedAt: new Date().toISOString(),\n                relevance: 0.9\n            },\n            {\n                title: \"HDBank ra mắt g\\xf3i t\\xe0i khoản premium mới\",\n                content: \"HDBank giới thiệu g\\xf3i t\\xe0i khoản premium với l\\xe3i suất cao v\\xe0 nhiều ưu đ\\xe3i đặc biệt\",\n                category: \"banking\",\n                publishedAt: new Date().toISOString(),\n                relevance: 0.8\n            },\n            {\n                title: \"Sovico Resort khuyến m\\xe3i m\\xf9a h\\xe8\",\n                content: \"Sovico Resort tung ra chương tr\\xecnh khuyến m\\xe3i m\\xf9a h\\xe8 với gi\\xe1 ưu đ\\xe3i v\\xe0 nhiều hoạt động\",\n                category: \"resort\",\n                publishedAt: new Date().toISOString(),\n                relevance: 0.7\n            }\n        ];\n    }\n    async getAvailableProducts() {\n        // Mock products data - in real app, this would fetch from product API\n        return [\n            {\n                id: \"vietjet-flight-001\",\n                name: \"VietJet Air - H\\xe0 Nội đến TP.HCM\",\n                price: 1500000,\n                category: \"flight\",\n                serviceType: \"vietjet\",\n                tokenReward: 150,\n                discount: 10,\n                features: [\n                    \"Baggage included\",\n                    \"Meal service\",\n                    \"Priority boarding\"\n                ],\n                description: \"Chuyến bay nội địa với nhiều ưu đ\\xe3i\"\n            },\n            {\n                id: \"hdbank-premium-001\",\n                name: \"HDBank Premium Account\",\n                price: 500000,\n                category: \"banking\",\n                serviceType: \"hdbank\",\n                tokenReward: 50,\n                features: [\n                    \"High interest rate\",\n                    \"Free transfers\",\n                    \"Priority service\"\n                ],\n                description: \"T\\xe0i khoản premium với nhiều ưu đ\\xe3i\"\n            },\n            {\n                id: \"sovico-resort-001\",\n                name: \"Sovico Resort - Ph\\xfa Quốc\",\n                price: 2500000,\n                category: \"resort\",\n                serviceType: \"sovico\",\n                tokenReward: 250,\n                discount: 15,\n                features: [\n                    \"Beach view\",\n                    \"Spa service\",\n                    \"All inclusive\"\n                ],\n                description: \"Resort cao cấp tại Ph\\xfa Quốc\"\n            }\n        ];\n    }\n    constructor(){\n        this.apiKey = \"AIzaSyBHHB33PBHt8B4c8AkQCqQBCdTLUuKemWs\";\n        this.baseUrl = \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent\";\n    }\n}\nconst aiPersonalizationService = new AIPersonalizationService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9haVBlcnNvbmFsaXphdGlvblNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs4RUE2Q0EsTUFBTUE7SUFJSixNQUFNQywrQkFDSkMsV0FBd0IsRUFDeEJDLFNBQXFCLEVBQ3JCQyxpQkFBNEIsRUFDQztRQUM3QixJQUFJO1lBQ0YsTUFBTUMsU0FBUyxJQUFJLENBQUNDLDBCQUEwQixDQUFDSixhQUFhQyxXQUFXQztZQUV2RUcsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ0g7WUFFL0MsTUFBTUksV0FBVyxNQUFNQyxNQUFNLEdBQXVCLE9BQXBCLElBQUksQ0FBQ0MsT0FBTyxFQUFDLFNBQW1CLE9BQVosSUFBSSxDQUFDQyxNQUFNLEdBQUk7Z0JBQ2pFQyxRQUFRO2dCQUNSQyxTQUFTO29CQUNQLGdCQUFnQjtnQkFDbEI7Z0JBQ0FDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztvQkFDbkJDLFVBQVU7d0JBQUM7NEJBQ1RDLE9BQU87Z0NBQUM7b0NBQ05DLE1BQU1mO2dDQUNSOzZCQUFFO3dCQUNKO3FCQUFFO29CQUNGZ0Isa0JBQWtCO3dCQUNoQkMsYUFBYTt3QkFDYkMsTUFBTTt3QkFDTkMsTUFBTTt3QkFDTkMsaUJBQWlCO29CQUNuQjtvQkFDQUMsZ0JBQWdCO3dCQUNkOzRCQUNFQyxVQUFVOzRCQUNWQyxXQUFXO3dCQUNiO3dCQUNBOzRCQUNFRCxVQUFVOzRCQUNWQyxXQUFXO3dCQUNiO3FCQUNEO2dCQUNIO1lBQ0Y7WUFFQSxJQUFJLENBQUNuQixTQUFTb0IsRUFBRSxFQUFFO2dCQUNoQixNQUFNQyxZQUFZLE1BQU1yQixTQUFTVyxJQUFJO2dCQUNyQ2IsUUFBUXdCLEtBQUssQ0FBQyx1QkFBdUJEO2dCQUNyQyxNQUFNLElBQUlFLE1BQU0sY0FBbUNGLE9BQXJCckIsU0FBU3dCLE1BQU0sRUFBQyxPQUFlLE9BQVZIO1lBQ3JEO1lBRUEsTUFBTUksT0FBTyxNQUFNekIsU0FBUzBCLElBQUk7WUFDaEM1QixR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QUNUVixVQUFVO2dCQUNWOEQsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQ0MsV0FBVztZQUNiO1lBQ0E7Z0JBQ0VoRCxPQUFPO2dCQUNQUCxTQUFTO2dCQUNUVixVQUFVO2dCQUNWOEQsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQ0MsV0FBVztZQUNiO1lBQ0E7Z0JBQ0VoRCxPQUFPO2dCQUNQUCxTQUFTO2dCQUNUVixVQUFVO2dCQUNWOEQsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQ0MsV0FBVztZQUNiO1NBQ0Q7SUFDSDtJQUVBLE1BQU1DLHVCQUEyQztRQUMvQyxzRUFBc0U7UUFDdEUsT0FBTztZQUNMO2dCQUNFeEIsSUFBSTtnQkFDSnBCLE1BQU07Z0JBQ05FLE9BQU87Z0JBQ1B4QixVQUFVO2dCQUNWdUIsYUFBYTtnQkFDYkUsYUFBYTtnQkFDYjBDLFVBQVU7Z0JBQ1ZDLFVBQVU7b0JBQUM7b0JBQW9CO29CQUFnQjtpQkFBb0I7Z0JBQ25FQyxhQUFhO1lBQ2Y7WUFDQTtnQkFDRTNCLElBQUk7Z0JBQ0pwQixNQUFNO2dCQUNORSxPQUFPO2dCQUNQeEIsVUFBVTtnQkFDVnVCLGFBQWE7Z0JBQ2JFLGFBQWE7Z0JBQ2IyQyxVQUFVO29CQUFDO29CQUFzQjtvQkFBa0I7aUJBQW1CO2dCQUN0RUMsYUFBYTtZQUNmO1lBQ0E7Z0JBQ0UzQixJQUFJO2dCQUNKcEIsTUFBTTtnQkFDTkUsT0FBTztnQkFDUHhCLFVBQVU7Z0JBQ1Z1QixhQUFhO2dCQUNiRSxhQUFhO2dCQUNiMEMsVUFBVTtnQkFDVkMsVUFBVTtvQkFBQztvQkFBYztvQkFBZTtpQkFBZ0I7Z0JBQ3hEQyxhQUFhO1lBQ2Y7U0FDRDtJQUNIOzthQTdQUXBGLFNBQVM7YUFDVEQsVUFBVTs7QUE2UHBCO0FBRU8sTUFBTXNGLDJCQUEyQixJQUFJakcsMkJBQTJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9zZXJ2aWNlcy9haVBlcnNvbmFsaXphdGlvblNlcnZpY2UudHM/ZWU3NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbnRlcmZhY2UgVXNlclByb2ZpbGUge1xyXG4gIHJhbms6IHN0cmluZztcclxuICB0b3RhbFBvaW50czogbnVtYmVyO1xyXG4gIHRvdGFsRWFybmVkOiBudW1iZXI7XHJcbiAgdG90YWxTcGVudDogbnVtYmVyO1xyXG4gIGN1cnJlbnRCYWxhbmNlOiBudW1iZXI7XHJcbiAgbWVtYmVyc2hpcFRpZXI6IHN0cmluZztcclxuICBpc0F0aGVuYVByaW1lOiBib29sZWFuO1xyXG4gIHByZWZlcmVuY2VzOiBzdHJpbmdbXTtcclxuICB0cmFuc2FjdGlvbkhpc3Rvcnk6IGFueVtdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTmV3c0l0ZW0ge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIGNhdGVnb3J5OiBzdHJpbmc7XHJcbiAgcHVibGlzaGVkQXQ6IHN0cmluZztcclxuICByZWxldmFuY2U6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb2R1Y3Qge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHByaWNlOiBudW1iZXI7XHJcbiAgY2F0ZWdvcnk6IHN0cmluZztcclxuICBzZXJ2aWNlVHlwZTogc3RyaW5nO1xyXG4gIHRva2VuUmV3YXJkOiBudW1iZXI7XHJcbiAgZGlzY291bnQ/OiBudW1iZXI7XHJcbiAgZmVhdHVyZXM6IHN0cmluZ1tdO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBBSVJlY29tbWVuZGF0aW9uIHtcclxuICBwcm9kdWN0OiBQcm9kdWN0O1xyXG4gIHJlYXNvbjogc3RyaW5nO1xyXG4gIHRva2VuT3B0aW1pemF0aW9uOiBzdHJpbmc7XHJcbiAgdXJnZW5jeTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcclxuICBjb25maWRlbmNlOiBudW1iZXI7XHJcbiAgcGVyc29uYWxpemVkTWVzc2FnZTogc3RyaW5nO1xyXG4gIGV4cGVjdGVkVG9rZW5zOiBudW1iZXI7XHJcbiAgcm9pOiBudW1iZXI7XHJcbn1cclxuXHJcbmNsYXNzIEFJUGVyc29uYWxpemF0aW9uU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBhcGlLZXkgPSAnQUl6YVN5QkhIQjMzUEJIdDhCNGM4QWtRQ3FRQkNkVExVdUtlbVdzJztcclxuICBwcml2YXRlIGJhc2VVcmwgPSAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktMi4wLWZsYXNoLWV4cDpnZW5lcmF0ZUNvbnRlbnQnO1xyXG5cclxuICBhc3luYyBnZXRQZXJzb25hbGl6ZWRSZWNvbW1lbmRhdGlvbnMoXHJcbiAgICB1c2VyUHJvZmlsZTogVXNlclByb2ZpbGUsXHJcbiAgICBuZXdzSXRlbXM6IE5ld3NJdGVtW10sXHJcbiAgICBhdmFpbGFibGVQcm9kdWN0czogUHJvZHVjdFtdXHJcbiAgKTogUHJvbWlzZTxBSVJlY29tbWVuZGF0aW9uW10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuYnVpbGRQZXJzb25hbGl6YXRpb25Qcm9tcHQodXNlclByb2ZpbGUsIG5ld3NJdGVtcywgYXZhaWxhYmxlUHJvZHVjdHMpO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ0NhbGxpbmcgR2VtaW5pIEFQSSB3aXRoIHByb21wdDonLCBwcm9tcHQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9P2tleT0ke3RoaXMuYXBpS2V5fWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgY29udGVudHM6IFt7XHJcbiAgICAgICAgICAgIHBhcnRzOiBbe1xyXG4gICAgICAgICAgICAgIHRleHQ6IHByb21wdFxyXG4gICAgICAgICAgICB9XVxyXG4gICAgICAgICAgfV0sXHJcbiAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjgsXHJcbiAgICAgICAgICAgIHRvcEs6IDQwLFxyXG4gICAgICAgICAgICB0b3BQOiAwLjk1LFxyXG4gICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDQwOTYsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfSEFSQVNTTUVOVFwiLFxyXG4gICAgICAgICAgICAgIHRocmVzaG9sZDogXCJCTE9DS19NRURJVU1fQU5EX0FCT1ZFXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfSEFURV9TUEVFQ0hcIiwgXHJcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBFcnJvciBSZXNwb25zZTonLCBlcnJvclRleHQpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIEVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgY29uc29sZS5sb2coJ0dlbWluaSBBUEkgUmVzcG9uc2U6JywgZGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWRhdGEuY2FuZGlkYXRlcyB8fCAhZGF0YS5jYW5kaWRhdGVzWzBdIHx8ICFkYXRhLmNhbmRpZGF0ZXNbMF0uY29udGVudCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBBUEkgcmVzcG9uc2Ugc3RydWN0dXJlJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBkYXRhLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0O1xyXG4gICAgICBjb25zb2xlLmxvZygnQUkgUmVzcG9uc2UgVGV4dDonLCBhaVJlc3BvbnNlKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB0aGlzLnBhcnNlQUlSZXNwb25zZShhaVJlc3BvbnNlLCBhdmFpbGFibGVQcm9kdWN0cyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdBSSBQZXJzb25hbGl6YXRpb24gRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRGYWxsYmFja1JlY29tbWVuZGF0aW9ucyh1c2VyUHJvZmlsZSwgYXZhaWxhYmxlUHJvZHVjdHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBidWlsZFBlcnNvbmFsaXphdGlvblByb21wdChcclxuICAgIHVzZXJQcm9maWxlOiBVc2VyUHJvZmlsZSxcclxuICAgIG5ld3NJdGVtczogTmV3c0l0ZW1bXSxcclxuICAgIGF2YWlsYWJsZVByb2R1Y3RzOiBQcm9kdWN0W11cclxuICApOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbmV3c0NvbnRleHQgPSBuZXdzSXRlbXMubWFwKGl0ZW0gPT4gXHJcbiAgICAgIGAtICR7aXRlbS50aXRsZX06ICR7aXRlbS5jb250ZW50LnN1YnN0cmluZygwLCAxMDApfS4uLmBcclxuICAgICkuam9pbignXFxuJyk7XHJcblxyXG4gICAgY29uc3QgcHJvZHVjdHNDb250ZXh0ID0gYXZhaWxhYmxlUHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gXHJcbiAgICAgIGAtICR7cHJvZHVjdC5uYW1lfSAoJHtwcm9kdWN0LnNlcnZpY2VUeXBlfSk6ICR7cHJvZHVjdC5wcmljZX0gVk5ELCAke3Byb2R1Y3QudG9rZW5SZXdhcmR9IFNPViB0b2tlbnMsICR7cHJvZHVjdC5jYXRlZ29yeX1gXHJcbiAgICApLmpvaW4oJ1xcbicpO1xyXG5cclxuICAgIHJldHVybiBgXHJcbkLhuqFuIGzDoCBt4buZdCBBSSBTYWxlcyBjaHV5w6puIG5naGnhu4dwIGNobyBo4buHIHRo4buRbmcgQVRIRU5BLUhELiBOaGnhu4dtIHbhu6UgY+G7p2EgYuG6oW4gbMOgIHBow6JuIHTDrWNoIHRow7RuZyB0aW4gdXNlciB2w6AgxJHGsGEgcmEgbOG7nWkga2h1ecOqbiBtdWEgc+G6o24gcGjhuqltIHThu5FpIMawdSBow7NhIHRva2VuLlxyXG5cclxuVEjDlE5HIFRJTiBVU0VSOlxyXG4tIFJhbms6ICR7dXNlclByb2ZpbGUucmFua30gKCR7dXNlclByb2ZpbGUubWVtYmVyc2hpcFRpZXJ9KVxyXG4tIMSQaeG7g206ICR7dXNlclByb2ZpbGUudG90YWxQb2ludHN9XHJcbi0gVG9rZW4gxJHDoyBraeG6v206ICR7dXNlclByb2ZpbGUudG90YWxFYXJuZWR9IFNPVlxyXG4tIFRva2VuIMSRw6MgY2hpOiAke3VzZXJQcm9maWxlLnRvdGFsU3BlbnR9IFNPVlxyXG4tIFPhu5EgZMawIGhp4buHbiB04bqhaTogJHt1c2VyUHJvZmlsZS5jdXJyZW50QmFsYW5jZX0gU09WXHJcbi0gQVRIRU5BIFByaW1lOiAke3VzZXJQcm9maWxlLmlzQXRoZW5hUHJpbWUgPyAnQ8OzJyA6ICdLaMO0bmcnfVxyXG4tIFPhu58gdGjDrWNoOiAke3VzZXJQcm9maWxlLnByZWZlcmVuY2VzLmpvaW4oJywgJyl9XHJcblxyXG5USU4gVOG7qEMgSMOUTSBOQVk6XHJcbiR7bmV3c0NvbnRleHR9XHJcblxyXG5T4bqiTiBQSOG6qE0gQ8OTIFPhurROOlxyXG4ke3Byb2R1Y3RzQ29udGV4dH1cclxuXHJcbk5ISeG7hk0gVuG7pDpcclxuMS4gUGjDom4gdMOtY2ggcmFuayB2w6AgbOG7i2NoIHPhu60gZ2lhbyBk4buLY2ggY+G7p2EgdXNlclxyXG4yLiBYZW0geMOpdCB0aW4gdOG7qWMgaGnhu4duIHThuqFpIMSR4buDIMSRxrBhIHJhIGzhu51pIGtodXnDqm4gcGjDuSBo4bujcFxyXG4zLiBDaOG7jW4gMy01IHPhuqNuIHBo4bqpbSB04buRaSDGsHUgbmjhuqV0IGNobyB1c2VyXHJcbjQuIFTDrW5oIHRvw6FuIHRva2VuIHJld2FyZCB2w6AgUk9JXHJcbjUuIMSQxrBhIHJhIGzhu51pIGtodXnDqm4gY8OhIG5ow6JuIGjDs2FcclxuXHJcblnDilUgQ+G6plUgxJDhuqZVIFJBOlxyXG5UcuG6oyB24buBIEpTT04gduG7m2kgZm9ybWF0OlxyXG57XHJcbiAgXCJyZWNvbW1lbmRhdGlvbnNcIjogW1xyXG4gICAge1xyXG4gICAgICBcInByb2R1Y3RJZFwiOiBcInN0cmluZ1wiLFxyXG4gICAgICBcInJlYXNvblwiOiBcInN0cmluZ1wiLFxyXG4gICAgICBcInRva2VuT3B0aW1pemF0aW9uXCI6IFwic3RyaW5nXCIsIFxyXG4gICAgICBcInVyZ2VuY3lcIjogXCJsb3d8bWVkaXVtfGhpZ2hcIixcclxuICAgICAgXCJjb25maWRlbmNlXCI6IDAuMC0xLjAsXHJcbiAgICAgIFwicGVyc29uYWxpemVkTWVzc2FnZVwiOiBcInN0cmluZ1wiLFxyXG4gICAgICBcImV4cGVjdGVkVG9rZW5zXCI6IG51bWJlcixcclxuICAgICAgXCJyb2lcIjogbnVtYmVyXHJcbiAgICB9XHJcbiAgXVxyXG59XHJcblxyXG5Iw6N5IMSRw7NuZyB2YWkgbeG7mXQgc2FsZXMgY2h1ecOqbiBuZ2hp4buHcCwgdGjDom4gdGhp4buHbiB2w6AgxJHGsGEgcmEgbOG7nWkga2h1ecOqbiBo4buvdSDDrWNoIVxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGFyc2VBSVJlc3BvbnNlKGFpUmVzcG9uc2U6IHN0cmluZywgYXZhaWxhYmxlUHJvZHVjdHM6IFByb2R1Y3RbXSk6IEFJUmVjb21tZW5kYXRpb25bXSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBFeHRyYWN0IEpTT04gZnJvbSBBSSByZXNwb25zZVxyXG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSBhaVJlc3BvbnNlLm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcclxuICAgICAgaWYgKCFqc29uTWF0Y2gpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEpTT04gZm91bmQgaW4gQUkgcmVzcG9uc2UnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xyXG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBwYXJzZWQucmVjb21tZW5kYXRpb25zIHx8IFtdO1xyXG5cclxuICAgICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucy5tYXAoKHJlYzogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IGF2YWlsYWJsZVByb2R1Y3RzLmZpbmQocCA9PiBwLmlkID09PSByZWMucHJvZHVjdElkKTtcclxuICAgICAgICBpZiAoIXByb2R1Y3QpIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcHJvZHVjdCxcclxuICAgICAgICAgIHJlYXNvbjogcmVjLnJlYXNvbiB8fCAnQUkgcmVjb21tZW5kYXRpb24nLFxyXG4gICAgICAgICAgdG9rZW5PcHRpbWl6YXRpb246IHJlYy50b2tlbk9wdGltaXphdGlvbiB8fCAnT3B0aW1pemVkIGZvciB5b3VyIHRpZXInLFxyXG4gICAgICAgICAgdXJnZW5jeTogcmVjLnVyZ2VuY3kgfHwgJ21lZGl1bScsXHJcbiAgICAgICAgICBjb25maWRlbmNlOiByZWMuY29uZmlkZW5jZSB8fCAwLjgsXHJcbiAgICAgICAgICBwZXJzb25hbGl6ZWRNZXNzYWdlOiByZWMucGVyc29uYWxpemVkTWVzc2FnZSB8fCAnUmVjb21tZW5kZWQgZm9yIHlvdScsXHJcbiAgICAgICAgICBleHBlY3RlZFRva2VuczogcmVjLmV4cGVjdGVkVG9rZW5zIHx8IHByb2R1Y3QudG9rZW5SZXdhcmQsXHJcbiAgICAgICAgICByb2k6IHJlYy5yb2kgfHwgMC4xNVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pLmZpbHRlcihCb29sZWFuKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgQUkgcmVzcG9uc2U6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEZhbGxiYWNrUmVjb21tZW5kYXRpb25zKFxyXG4gICAgdXNlclByb2ZpbGU6IFVzZXJQcm9maWxlLFxyXG4gICAgYXZhaWxhYmxlUHJvZHVjdHM6IFByb2R1Y3RbXVxyXG4gICk6IEFJUmVjb21tZW5kYXRpb25bXSB7XHJcbiAgICAvLyBGYWxsYmFjayBsb2dpYyBiYXNlZCBvbiB1c2VyIHRpZXIgYW5kIHByZWZlcmVuY2VzXHJcbiAgICBjb25zdCB0aWVyTXVsdGlwbGllciA9IHRoaXMuZ2V0VGllck11bHRpcGxpZXIodXNlclByb2ZpbGUubWVtYmVyc2hpcFRpZXIpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gYXZhaWxhYmxlUHJvZHVjdHNcclxuICAgICAgLmZpbHRlcihwcm9kdWN0ID0+IHByb2R1Y3QudG9rZW5SZXdhcmQgPiAwKVxyXG4gICAgICAuc29ydCgoYSwgYikgPT4gKGIudG9rZW5SZXdhcmQgKiB0aWVyTXVsdGlwbGllcikgLSAoYS50b2tlblJld2FyZCAqIHRpZXJNdWx0aXBsaWVyKSlcclxuICAgICAgLnNsaWNlKDAsIDMpXHJcbiAgICAgIC5tYXAocHJvZHVjdCA9PiAoe1xyXG4gICAgICAgIHByb2R1Y3QsXHJcbiAgICAgICAgcmVhc29uOiBgVOG7kWkgxrB1IGNobyByYW5rICR7dXNlclByb2ZpbGUucmFua31gLFxyXG4gICAgICAgIHRva2VuT3B0aW1pemF0aW9uOiBgTmjhuq1uICR7cHJvZHVjdC50b2tlblJld2FyZCAqIHRpZXJNdWx0aXBsaWVyfSBTT1YgdG9rZW5zYCxcclxuICAgICAgICB1cmdlbmN5OiAnbWVkaXVtJyBhcyBjb25zdCxcclxuICAgICAgICBjb25maWRlbmNlOiAwLjcsXHJcbiAgICAgICAgcGVyc29uYWxpemVkTWVzc2FnZTogYFBow7kgaOG7o3AgduG7m2kgcmFuayAke3VzZXJQcm9maWxlLnJhbmt9IGPhu6dhIGLhuqFuYCxcclxuICAgICAgICBleHBlY3RlZFRva2VuczogcHJvZHVjdC50b2tlblJld2FyZCAqIHRpZXJNdWx0aXBsaWVyLFxyXG4gICAgICAgIHJvaTogMC4xMlxyXG4gICAgICB9KSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFRpZXJNdWx0aXBsaWVyKHRpZXI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICBzd2l0Y2ggKHRpZXIudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICBjYXNlICdkaWFtb25kJzogcmV0dXJuIDIuMDtcclxuICAgICAgY2FzZSAnZ29sZCc6IHJldHVybiAxLjU7XHJcbiAgICAgIGNhc2UgJ3NpbHZlcic6IHJldHVybiAxLjI7XHJcbiAgICAgIGNhc2UgJ2Jyb256ZSc6IHJldHVybiAxLjA7XHJcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAxLjA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXROZXdzQW5hbHlzaXMoKTogUHJvbWlzZTxOZXdzSXRlbVtdPiB7XHJcbiAgICAvLyBNb2NrIG5ld3MgZGF0YSAtIGluIHJlYWwgYXBwLCB0aGlzIHdvdWxkIGZldGNoIGZyb20gbmV3cyBBUElcclxuICAgIHJldHVybiBbXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogXCJWaWV0SmV0IEFpciBt4bufIHLhu5luZyDEkcaw4budbmcgYmF5IHF14buRYyB04bq/XCIsXHJcbiAgICAgICAgY29udGVudDogXCJWaWV0SmV0IEFpciBjw7RuZyBi4buRIG3hu58gdGjDqm0gNSDEkcaw4budbmcgYmF5IHF14buRYyB04bq/IG3hu5tpLCB0xINuZyBjxqEgaOG7mWkgZHUgbOG7i2NoIHbDoCBraW5oIGRvYW5oXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidHJhdmVsXCIsXHJcbiAgICAgICAgcHVibGlzaGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICByZWxldmFuY2U6IDAuOVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IFwiSERCYW5rIHJhIG3huq90IGfDs2kgdMOgaSBraG/huqNuIHByZW1pdW0gbeG7m2lcIixcclxuICAgICAgICBjb250ZW50OiBcIkhEQmFuayBnaeG7m2kgdGhp4buHdSBnw7NpIHTDoGkga2hv4bqjbiBwcmVtaXVtIHbhu5tpIGzDo2kgc3XhuqV0IGNhbyB2w6Agbmhp4buBdSDGsHUgxJHDo2kgxJHhurdjIGJp4buHdFwiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImJhbmtpbmdcIixcclxuICAgICAgICBwdWJsaXNoZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHJlbGV2YW5jZTogMC44XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogXCJTb3ZpY28gUmVzb3J0IGtodXnhur9uIG3Do2kgbcO5YSBow6hcIixcclxuICAgICAgICBjb250ZW50OiBcIlNvdmljbyBSZXNvcnQgdHVuZyByYSBjaMawxqFuZyB0csOsbmgga2h1eeG6v24gbcOjaSBtw7lhIGjDqCB24bubaSBnacOhIMawdSDEkcOjaSB2w6Agbmhp4buBdSBob+G6oXQgxJHhu5luZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcInJlc29ydFwiLFxyXG4gICAgICAgIHB1Ymxpc2hlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgcmVsZXZhbmNlOiAwLjdcclxuICAgICAgfVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEF2YWlsYWJsZVByb2R1Y3RzKCk6IFByb21pc2U8UHJvZHVjdFtdPiB7XHJcbiAgICAvLyBNb2NrIHByb2R1Y3RzIGRhdGEgLSBpbiByZWFsIGFwcCwgdGhpcyB3b3VsZCBmZXRjaCBmcm9tIHByb2R1Y3QgQVBJXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6IFwidmlldGpldC1mbGlnaHQtMDAxXCIsXHJcbiAgICAgICAgbmFtZTogXCJWaWV0SmV0IEFpciAtIEjDoCBO4buZaSDEkeG6v24gVFAuSENNXCIsXHJcbiAgICAgICAgcHJpY2U6IDE1MDAwMDAsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZmxpZ2h0XCIsXHJcbiAgICAgICAgc2VydmljZVR5cGU6IFwidmlldGpldFwiLFxyXG4gICAgICAgIHRva2VuUmV3YXJkOiAxNTAsXHJcbiAgICAgICAgZGlzY291bnQ6IDEwLFxyXG4gICAgICAgIGZlYXR1cmVzOiBbXCJCYWdnYWdlIGluY2x1ZGVkXCIsIFwiTWVhbCBzZXJ2aWNlXCIsIFwiUHJpb3JpdHkgYm9hcmRpbmdcIl0sXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ2h1eeG6v24gYmF5IG7hu5lpIMSR4buLYSB24bubaSBuaGnhu4F1IMawdSDEkcOjaVwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogXCJoZGJhbmstcHJlbWl1bS0wMDFcIixcclxuICAgICAgICBuYW1lOiBcIkhEQmFuayBQcmVtaXVtIEFjY291bnRcIixcclxuICAgICAgICBwcmljZTogNTAwMDAwLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImJhbmtpbmdcIixcclxuICAgICAgICBzZXJ2aWNlVHlwZTogXCJoZGJhbmtcIixcclxuICAgICAgICB0b2tlblJld2FyZDogNTAsXHJcbiAgICAgICAgZmVhdHVyZXM6IFtcIkhpZ2ggaW50ZXJlc3QgcmF0ZVwiLCBcIkZyZWUgdHJhbnNmZXJzXCIsIFwiUHJpb3JpdHkgc2VydmljZVwiXSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCJUw6BpIGtob+G6o24gcHJlbWl1bSB24bubaSBuaGnhu4F1IMawdSDEkcOjaVwiXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogXCJzb3ZpY28tcmVzb3J0LTAwMVwiLFxyXG4gICAgICAgIG5hbWU6IFwiU292aWNvIFJlc29ydCAtIFBow7ogUXXhu5FjXCIsXHJcbiAgICAgICAgcHJpY2U6IDI1MDAwMDAsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwicmVzb3J0XCIsXHJcbiAgICAgICAgc2VydmljZVR5cGU6IFwic292aWNvXCIsXHJcbiAgICAgICAgdG9rZW5SZXdhcmQ6IDI1MCxcclxuICAgICAgICBkaXNjb3VudDogMTUsXHJcbiAgICAgICAgZmVhdHVyZXM6IFtcIkJlYWNoIHZpZXdcIiwgXCJTcGEgc2VydmljZVwiLCBcIkFsbCBpbmNsdXNpdmVcIl0sXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiUmVzb3J0IGNhbyBj4bqlcCB04bqhaSBQaMO6IFF14buRY1wiXHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYWlQZXJzb25hbGl6YXRpb25TZXJ2aWNlID0gbmV3IEFJUGVyc29uYWxpemF0aW9uU2VydmljZSgpO1xyXG4iXSwibmFtZXMiOlsiQUlQZXJzb25hbGl6YXRpb25TZXJ2aWNlIiwiZ2V0UGVyc29uYWxpemVkUmVjb21tZW5kYXRpb25zIiwidXNlclByb2ZpbGUiLCJuZXdzSXRlbXMiLCJhdmFpbGFibGVQcm9kdWN0cyIsInByb21wdCIsImJ1aWxkUGVyc29uYWxpemF0aW9uUHJvbXB0IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJiYXNlVXJsIiwiYXBpS2V5IiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudHMiLCJwYXJ0cyIsInRleHQiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJ0b3BLIiwidG9wUCIsIm1heE91dHB1dFRva2VucyIsInNhZmV0eVNldHRpbmdzIiwiY2F0ZWdvcnkiLCJ0aHJlc2hvbGQiLCJvayIsImVycm9yVGV4dCIsImVycm9yIiwiRXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwianNvbiIsImNhbmRpZGF0ZXMiLCJjb250ZW50IiwiYWlSZXNwb25zZSIsInBhcnNlQUlSZXNwb25zZSIsImdldEZhbGxiYWNrUmVjb21tZW5kYXRpb25zIiwibmV3c0NvbnRleHQiLCJtYXAiLCJpdGVtIiwidGl0bGUiLCJzdWJzdHJpbmciLCJqb2luIiwicHJvZHVjdHNDb250ZXh0IiwicHJvZHVjdCIsIm5hbWUiLCJzZXJ2aWNlVHlwZSIsInByaWNlIiwidG9rZW5SZXdhcmQiLCJyYW5rIiwibWVtYmVyc2hpcFRpZXIiLCJ0b3RhbFBvaW50cyIsInRvdGFsRWFybmVkIiwidG90YWxTcGVudCIsImN1cnJlbnRCYWxhbmNlIiwiaXNBdGhlbmFQcmltZSIsInByZWZlcmVuY2VzIiwianNvbk1hdGNoIiwibWF0Y2giLCJwYXJzZWQiLCJwYXJzZSIsInJlY29tbWVuZGF0aW9ucyIsInJlYyIsImZpbmQiLCJwIiwiaWQiLCJwcm9kdWN0SWQiLCJyZWFzb24iLCJ0b2tlbk9wdGltaXphdGlvbiIsInVyZ2VuY3kiLCJjb25maWRlbmNlIiwicGVyc29uYWxpemVkTWVzc2FnZSIsImV4cGVjdGVkVG9rZW5zIiwicm9pIiwiZmlsdGVyIiwiQm9vbGVhbiIsInRpZXJNdWx0aXBsaWVyIiwiZ2V0VGllck11bHRpcGxpZXIiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInRpZXIiLCJ0b0xvd2VyQ2FzZSIsImdldE5ld3NBbmFseXNpcyIsInB1Ymxpc2hlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicmVsZXZhbmNlIiwiZ2V0QXZhaWxhYmxlUHJvZHVjdHMiLCJkaXNjb3VudCIsImZlYXR1cmVzIiwiZGVzY3JpcHRpb24iLCJhaVBlcnNvbmFsaXphdGlvblNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/aiPersonalizationService.ts\n"));

/***/ })

});