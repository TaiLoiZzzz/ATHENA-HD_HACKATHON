(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{1906:function(e,s,t){Promise.resolve().then(t.bind(t,3497))},3497:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var a=t(3119),l=t(9493),r=t(6542),n=t(8038),i=t(7567),c=t(3509),d=t(52),o=t(9117),m=t(7549),x=t(9409),u=t(6555),h=t(1260),g=t(5171),p=t(9757),b=t(9418),j=t(5972),f=e=>{let{flightDetails:s,passengers:t,totalPrice:r,sovTokenAmount:n,onPaymentSuccess:i,onPaymentError:c,className:d=""}=e,[o,f]=(0,l.useState)(null),[N,y]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!1);(0,l.useEffect)(()=>{D()},[]);let D=async()=>{try{let e=await b.H.getWallet();f(e)}catch(e){console.error("Failed to load wallet:",e)}},C=async()=>{if(!o||o.balance<O){j.default.error("Insufficient SOV token balance");return}w(!0);try{var e;let a=b.H.processPayment(O,"vietjet","flight_".concat(null==s?void 0:s.flightNumber,"_").concat(Date.now()),"VietJet Air booking - ".concat(null==s?void 0:s.departure.airport.code," to ").concat(null==s?void 0:s.arrival.airport.code)),l={id:a.id,flightDetails:s,passengers:t,totalPrice:r,sovTokensUsed:O,sovTokensEarned:(null==s?void 0:null===(e=s.sovTokens)||void 0===e?void 0:e.standard)||0,bookingDate:new Date().toISOString(),status:"confirmed",paymentMethod:"sov_token",contactInfo:{email:"user@example.com",phone:"+84 123 456 789"}},n=JSON.parse(localStorage.getItem("flight_bookings")||"[]");n.unshift(l),localStorage.setItem("flight_bookings",JSON.stringify(n)),b.H.addTransaction({type:"spend",amount:-O,description:"Flight booking: ".concat(null==s?void 0:s.airline," ").concat(null==s?void 0:s.flightNumber),serviceType:"flight",serviceReferenceId:a.id,status:"completed",metadata:{flightNumber:null==s?void 0:s.flightNumber,route:"".concat(null==s?void 0:s.departure.airport.code,"-").concat(null==s?void 0:s.arrival.airport.code),passengers:t.length,bookingId:a.id}}),j.default.success("Payment successful! Flight booked."),S(!1),i&&i({...a,bookingData:l}),await D()}catch(s){let e=s.message||"Payment failed";j.default.error(e),c&&c(e)}finally{w(!1)}},O=n||Math.ceil(r/1e4),T=o&&o.balance>=O;console.log("FlightPayment Debug:",{totalPrice:r,sovTokenAmount:n,actualTokenAmount:O,walletBalance:null==o?void 0:o.balance,canPay:T});let E=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),V=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,a.jsxs)("div",{className:"space-y-6 ".concat(d),children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Flight Summary"}),s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:s.airline}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Flight ",s.flightNumber]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:E(r)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[n||Math.ceil(r/1e4)," SOV"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Departure"}),(0,a.jsx)("p",{className:"font-medium",children:s.departure.airport.code}),(0,a.jsx)("p",{className:"text-gray-600",children:s.departure.time}),(0,a.jsx)("p",{className:"text-gray-600",children:V(s.departure.date)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Arrival"}),(0,a.jsx)("p",{className:"font-medium",children:s.arrival.airport.code}),(0,a.jsx)("p",{className:"text-gray-600",children:s.arrival.time}),(0,a.jsx)("p",{className:"text-gray-600",children:V(s.arrival.date)})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Passengers:"}),(0,a.jsxs)("span",{className:"font-medium",children:[t.length," passenger(s)"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Duration:"}),(0,a.jsx)("span",{className:"font-medium",children:s.duration})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-blue-900",children:"SOV Tokens"}),(0,a.jsx)("div",{className:"text-sm text-blue-700",children:"Pay with your SOV token balance"})]})]})})]}),o&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Wallet Balance"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Available Balance"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[o.balance.toLocaleString()," SOV"]})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Total Spent"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-900",children:[o.totalSpent.toLocaleString()," SOV"]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"Total Earned"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-900",children:[o.totalEarned.toLocaleString()," SOV"]})]})]})]}),k&&(0,a.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6 border-2 border-blue-200",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Confirmation"}),(0,a.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Flight:"}),(0,a.jsxs)("span",{className:"font-medium",children:[null==s?void 0:s.airline," ",null==s?void 0:s.flightNumber]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Route:"}),(0,a.jsxs)("span",{className:"font-medium",children:[null==s?void 0:s.departure.airport.code," → ",null==s?void 0:s.arrival.airport.code]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Passengers:"}),(0,a.jsx)("span",{className:"font-medium",children:t.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Price:"}),(0,a.jsx)("span",{className:"font-medium",children:E(r)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"SOV Tokens:"}),(0,a.jsxs)("span",{className:"font-medium text-blue-600",children:[n," SOV"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Transaction Fee:"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:"0 SOV"})]}),(0,a.jsx)("div",{className:"border-t pt-3",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Total:"}),(0,a.jsxs)("span",{className:"font-bold text-blue-600",children:[n," SOV"]})]})})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:C,disabled:!T||v,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Processing..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Confirm Payment"}),(0,a.jsx)(p.Z,{className:"w-4 h-4"})]})})]})]}),!k&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("button",{onClick:()=>S(!0),disabled:!T||O<=0,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[(0,a.jsxs)("span",{children:["Pay ",n||Math.ceil(r/1e4)," SOV"]}),(0,a.jsx)(p.Z,{className:"w-5 h-5"})]}),!T&&n>0&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-2 text-center",children:"Insufficient balance for payment"}),0===O&&(0,a.jsx)("p",{className:"text-sm text-yellow-600 mt-2 text-center",children:"⚠️ No payment amount calculated. Please check flight selection."})]})]})},N=e=>{let{selectedOutbound:s,selectedReturn:t,passengers:l,bonusTokenPercentage:r,setBonusTokenPercentage:n,calculateTotalPrice:i,calculateTotalTokens:c,sovTokenAmount:m,setCurrentStep:x,onBookingSuccess:u}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Bonus Tokens"}),(0,a.jsxs)("div",{className:"mb-8 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 text-purple-600 mr-2"}),"Bonus Token Options"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{value:0,label:"No Bonus",description:"Standard token earning"},{value:25,label:"25% Bonus",description:"+25% more tokens earned",cost:Math.floor(.05*i())},{value:50,label:"50% Bonus",description:"+50% more tokens earned",cost:Math.floor(.1*i())},{value:100,label:"100% Bonus",description:"Double tokens earned!",cost:Math.floor(.2*i())}].map(e=>(0,a.jsx)("div",{onClick:()=>n(e.value),className:"p-4 border-2 rounded-lg cursor-pointer transition-all ".concat(r===e.value?"border-purple-500 bg-purple-100":"border-gray-200 hover:border-purple-300"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.cost&&(0,a.jsxs)("p",{className:"text-sm font-medium text-purple-600 mt-2",children:["+",e.cost.toLocaleString()," VND"]})]})},e.value))})]})]}),(0,a.jsx)(f,{flightDetails:s,passengers:l,totalPrice:i(),sovTokenAmount:i()>0?Math.ceil(i()/1e4):0,onPaymentSuccess:e=>{j.default.success("Flight booked successfully!"),u()},onPaymentError:e=>{j.default.error(e)}}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsxs)("button",{onClick:()=>x("passengers"),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Back to Passengers"})]})})})]})},y=t(5335),v=t(9566),w=t(3691),k=t(3354),S=t(2419),D=t(3800);function C(){var e;let[s,t]=(0,l.useState)("search"),[d,x]=(0,l.useState)([]),[u,h]=(0,l.useState)({from:"",to:"",departDate:"",returnDate:"",passengers:1,cabin:"economy"}),[b,f]=(0,l.useState)({flights:[],total:0,searchParams:{}}),[C,O]=(0,l.useState)(null),[T,E]=(0,l.useState)(null),[V,P]=(0,l.useState)([]),[F,B]=(0,l.useState)("fiat"),[A,M]=(0,l.useState)(0),[Z,L]=(0,l.useState)(0),[R,I]=(0,l.useState)(0),[q,H]=(0,l.useState)({email:"",phone:"",emergencyContact:"",specialRequests:""}),[_,z]=(0,l.useState)(!1),[W,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{J(),Y()},[u.passengers]),(0,l.useEffect)(()=>{if(C){let e=Math.ceil(C.price.base/1e4);L(e)}},[C]);let J=async()=>{try{let e=await y.Z.getAirports();x(e.airports||[])}catch(e){j.default.error("Failed to load airports"),x([])}},Y=()=>{let e=Array(u.passengers).fill(null).map((e,s)=>({title:"Mr",firstName:"",lastName:"",dateOfBirth:"",nationality:"VN",passportNumber:"",passportExpiry:""}));P(e)},G=async()=>{if(!u.from||!u.to||!u.departDate){j.default.error("Please fill all required search fields");return}z(!0);try{let e=new URLSearchParams({from:u.from,to:u.to,departDate:u.departDate,passengers:u.passengers.toString(),cabin:u.cabin});u.returnDate&&e.append("returnDate",u.returnDate);let s=await y.Z.searchVietjetFlights(u);f(s),t("results"),j.default.success("Found ".concat(s.flights.length," flights"))}catch(e){j.default.error(e.message||"Failed to search flights")}finally{z(!1)}},K=(e,s)=>{"outbound"===s?(O(e),u.returnDate||t("details")):(E(e),t("details"))},Q=(e,s)=>{let t="outbound"===s&&(null==C?void 0:C.flightNumber)===e.flightNumber||"return"===s&&(null==T?void 0:T.flightNumber)===e.flightNumber;return(0,a.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-all cursor-pointer border-2 ".concat(t?"border-blue-500 bg-blue-50":"border-transparent hover:border-blue-200"),onClick:()=>K(e,s),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:e.flightNumber}),t&&(0,a.jsx)("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full",children:"Selected"})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.airline," • ",e.aircraft]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[e.price.base.toLocaleString()," VND"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"per person"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(i.Z,{serviceType:"vietjet",category:"flights",amount:e.price.base,compact:!0})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:e.departure.time}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.departure.airport.code}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.departure.airport.city})]}),(0,a.jsx)("div",{className:"flex-1 mx-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"border-t-2 border-gray-300 flex-1"}),(0,a.jsxs)("div",{className:"mx-3 text-center",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-blue-600 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.duration})]}),(0,a.jsx)("div",{className:"border-t-2 border-gray-300 flex-1"})]})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:e.arrival.time}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.arrival.airport.code}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.arrival.airport.city})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-600 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Baggage:"})," ",e.baggage.carry," + ",e.baggage.checked]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Seats:"})," ",e.availableSeats," available"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Class:"})," ",e.cabin]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-3 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"SOV Tokens Earned"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-purple-600",children:[e.sovTokens.standard," tokens"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["(",e.sovTokens.prime," for ATHENA Prime)"]})]})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"px-6 py-2 rounded-lg font-medium transition-all ".concat(t?"bg-green-600 text-white cursor-default":"bg-blue-600 hover:bg-blue-700 text-white"),onClick:t=>{t.stopPropagation(),K(e,s)},children:t?"Selected ✓":"Select Flight"})})]},e.flightNumber)};return(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"VietJet Air Booking"}),(0,a.jsx)("p",{className:"mt-2 text-blue-100",children:"Book your flight and earn SOV tokens"})]}),(0,a.jsx)("div",{className:"hidden lg:block",children:(0,a.jsx)("button",{onClick:()=>U(!W),className:"bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors",children:"View SOV Wallet"})})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"flex-1",children:["search"===s&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,a.jsx)(v.Z,{className:"h-8 w-8 text-blue-600 mr-3"}),"Search Flights"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From"}),(0,a.jsxs)("select",{value:u.from,onChange:e=>h({...u,from:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select departure city"}),(d||[]).map(e=>(0,a.jsxs)("option",{value:e.code,children:[e.city," (",e.code,")"]},e.code))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To"}),(0,a.jsxs)("select",{value:u.to,onChange:e=>h({...u,to:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select destination city"}),(d||[]).map(e=>(0,a.jsxs)("option",{value:e.code,children:[e.city," (",e.code,")"]},e.code))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Departure"}),(0,a.jsx)("input",{type:"date",value:u.departDate,onChange:e=>h({...u,departDate:e.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Return (Optional)"}),(0,a.jsx)("input",{type:"date",value:u.returnDate,onChange:e=>h({...u,returnDate:e.target.value}),min:u.departDate||new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passengers"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>h({...u,passengers:Math.max(1,u.passengers-1)}),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:u.passengers<=1,children:(0,a.jsx)(w.Z,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:"px-4 py-2 text-lg font-medium",children:u.passengers}),(0,a.jsx)("button",{onClick:()=>h({...u,passengers:Math.min(9,u.passengers+1)}),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:u.passengers>=9,children:(0,a.jsx)(k.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cabin Class"}),(0,a.jsxs)("select",{value:u.cabin,onChange:e=>h({...u,cabin:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"economy",children:"Economy"}),(0,a.jsx)("option",{value:"business",children:"Business"})]})]})]}),(0,a.jsx)("button",{onClick:G,disabled:_||!u.from||!u.to||!u.departDate,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-4 px-6 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:_?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Search Flights"})]})})]}),"results"===s&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Available Flights"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[u.from," → ",u.to," on ",u.departDate]})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Outbound Flights"}),(0,a.jsx)(c.Z,{serviceType:"vietjet",amount:(null===(e=b.flights[0])||void 0===e?void 0:e.price.base)||0,category:"flights",position:"top",size:"medium"}),b.flights.map(e=>Q(e,"outbound"))]}),C&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(D.Z,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-green-800",children:"Flight Selected!"}),(0,a.jsxs)("p",{className:"text-sm text-green-700",children:[C.airline," ",C.flightNumber," - ",C.departure.airport.code," to ",C.arrival.airport.code]}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:[C.price.base.toLocaleString()," VND • ",C.sovTokens.standard," SOV tokens"]})]})]})}),C&&(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Selected Flight"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[C.airline," ",C.flightNumber," - ",C.departure.airport.code," to ",C.arrival.airport.code]}),(0,a.jsxs)("p",{className:"text-sm text-blue-600 font-medium",children:[C.price.base.toLocaleString()," VND • ",C.sovTokens.standard," SOV tokens"]})]}),(0,a.jsxs)("button",{onClick:()=>t("details"),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"Continue to Details"}),(0,a.jsx)(p.Z,{className:"w-5 h-5"})]})]})})]}),"details"===s&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Flight Details"}),C&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Selected Flight"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Departure"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C.departure.time}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-700",children:C.departure.airport.code}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:C.departure.airport.city}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:C.departure.date})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Arrival"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C.arrival.time}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-700",children:C.arrival.airport.code}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:C.arrival.airport.city}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:C.arrival.date})]})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Flight Duration"}),(0,a.jsx)("p",{className:"font-medium",children:C.duration})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aircraft"}),(0,a.jsx)("p",{className:"font-medium",children:C.aircraft})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cabin Class"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:C.cabin})]})]})})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing & Tokens"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Price Breakdown"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Base Fare:"}),(0,a.jsxs)("span",{className:"font-medium",children:[C.price.breakdown.baseFare.toLocaleString()," VND"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Taxes:"}),(0,a.jsxs)("span",{className:"font-medium",children:[C.price.breakdown.taxes.toLocaleString()," VND"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Fees:"}),(0,a.jsxs)("span",{className:"font-medium",children:[C.price.breakdown.fees.toLocaleString()," VND"]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Total:"}),(0,a.jsxs)("span",{className:"font-bold text-blue-600",children:[C.price.base.toLocaleString()," VND"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"SOV Tokens Earned"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Standard:"}),(0,a.jsxs)("span",{className:"font-medium text-purple-600",children:[C.sovTokens.standard," SOV"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ATHENA Prime:"}),(0,a.jsxs)("span",{className:"font-medium text-purple-600",children:[C.sovTokens.prime," SOV"]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Baggage Allowance"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Carry-on: ",C.baggage.carry]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Checked: ",C.baggage.checked]})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Amenities"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:C.amenities.map((e,s)=>(0,a.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:e},s))})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-8",children:[(0,a.jsxs)("button",{onClick:()=>t("results"),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Back to Flights"})]}),(0,a.jsxs)("button",{onClick:()=>{t("passengers")},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{children:"Continue to Passenger Info"}),(0,a.jsx)(p.Z,{className:"w-5 h-5"})]})]})]}),"passengers"===s&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Passenger Information"}),V.map((e,s)=>(0,a.jsxs)("div",{className:"mb-8 p-6 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Passenger ",s+1," ",0===s&&"(Lead Passenger)"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),(0,a.jsxs)("select",{value:e.title,onChange:e=>{let t=[...V];t[s].title=e.target.value,P(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Mr",children:"Mr"}),(0,a.jsx)("option",{value:"Mrs",children:"Mrs"}),(0,a.jsx)("option",{value:"Ms",children:"Ms"}),(0,a.jsx)("option",{value:"Dr",children:"Dr"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,a.jsx)("input",{type:"text",value:e.firstName,onChange:e=>{let t=[...V];t[s].firstName=e.target.value,P(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,a.jsx)("input",{type:"text",value:e.lastName,onChange:e=>{let t=[...V];t[s].lastName=e.target.value,P(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),(0,a.jsx)("input",{type:"date",value:e.dateOfBirth,onChange:e=>{let t=[...V];t[s].dateOfBirth=e.target.value,P(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passport Number *"}),(0,a.jsx)("input",{type:"text",value:e.passportNumber,onChange:e=>{let t=[...V];t[s].passportNumber=e.target.value,P(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Passport Expiry *"}),(0,a.jsx)("input",{type:"date",value:e.passportExpiry,onChange:e=>{let t=[...V];t[s].passportExpiry=e.target.value,P(t)},min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]})]})]},s)),(0,a.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,a.jsx)("input",{type:"email",value:q.email,onChange:e=>H({...q,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,a.jsx)("input",{type:"tel",value:q.phone,onChange:e=>H({...q,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),(0,a.jsx)("input",{type:"tel",value:q.emergencyContact,onChange:e=>H({...q,emergencyContact:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),(0,a.jsx)("textarea",{value:q.specialRequests,onChange:e=>H({...q,specialRequests:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Wheelchair assistance, dietary requirements, etc."})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-8",children:[(0,a.jsx)("button",{onClick:()=>t("details"),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-lg transition-colors",children:"Back to Flight Details"}),(0,a.jsx)("button",{onClick:()=>{let e=V.every(e=>e.firstName&&e.lastName&&e.dateOfBirth&&e.passportNumber&&e.passportExpiry);if(!e){j.default.error("Please complete all passenger information");return}if(!q.email||!q.phone){j.default.error("Please provide contact information");return}t("payment")},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Continue to Payment"})]})]}),"payment"===s&&(0,a.jsx)(N,{selectedOutbound:C,selectedReturn:T,passengers:V,bonusTokenPercentage:A,setBonusTokenPercentage:M,calculateTotalPrice:()=>{let e=0;return C&&(e+=C.price.base),T&&(e+=T.price.base),e},calculateTotalTokens:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=0;C&&(s+=e?C.sovTokens.prime:C.sovTokens.standard),T&&(s+=e?T.sovTokens.prime:T.sovTokens.standard);let t=Math.floor(s*(A/100));return s+t},sovTokenAmount:Z,setCurrentStep:e=>t(e),onBookingSuccess:()=>t("confirmation")}),"confirmation"===s&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(D.Z,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Booking Confirmed!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Your flight has been successfully booked. You will receive a confirmation email shortly."})]}),C&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Flight Details"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Flight:"})," ",C.airline," ",C.flightNumber]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Route:"})," ",C.departure.airport.code," → ",C.arrival.airport.code]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Date:"})," ",C.departure.date]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Time:"})," ",C.departure.time," - ",C.arrival.time]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Duration:"})," ",C.duration]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Passenger & Payment"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Passengers:"})," ",V.length]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Price:"})," ",C.price.base.toLocaleString()," VND"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"SOV Tokens Used:"})," ",Z]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"SOV Tokens Earned:"})," ",C.sovTokens.standard]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("button",{onClick:()=>t("search"),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Book Another Flight"}),(0,a.jsx)("button",{onClick:()=>window.location.href="/transactions",className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-3 px-6 rounded-lg transition-colors",children:"View Transaction History"})]})]})]}),(0,a.jsxs)("div",{className:"lg:w-80",children:[W&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(n.Z,{})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Progress"}),(0,a.jsx)("div",{className:"space-y-3",children:[{key:"search",label:"Search Flights"},{key:"results",label:"Select Flights"},{key:"details",label:"Flight Details"},{key:"passengers",label:"Passenger Info"},{key:"payment",label:"Payment"},{key:"confirmation",label:"Confirmation"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 ".concat(s===e.key?"text-blue-600":["search","results","details","passengers","payment"].indexOf(s)>t?"text-green-600":"text-gray-400"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(s===e.key?"bg-blue-100 text-blue-600":["search","results","details","passengers","payment"].indexOf(s)>t?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:["search","results","details","passengers","payment"].indexOf(s)>t?(0,a.jsx)(D.Z,{className:"h-5 w-5"}):t+1}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.key))})]})]})]})})]})})}},7567:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var a=t(3119),l=t(9493),r=t(7549),n=t(5171),i=t(52),c=t(3355);function d(e){let{serviceType:s,category:t,amount:d,className:o="",compact:m=!1}=e,[x,u]=(0,l.useState)(null),[h,g]=(0,l.useState)(!0);(0,l.useEffect)(()=>{d>0?p():g(!1)},[s,t,d]);let p=async()=>{try{let e=await c.N.getServiceBonus(s,d,t);u(e)}catch(a){console.error("Failed to fetch service bonus:",a);let e=Math.floor(d/1e4),s="Diamond",t=Math.floor(1*e);u({success:!0,userRank:s,bonusAmount:t,baseAmount:e,totalAmount:e+t,message:"\uD83C\uDF89 Bạn sẽ nhận được ".concat(e+t," SOV với rank ").concat(s,"!"),multiplier:2})}finally{g(!1)}},b=e=>e.toLocaleString(),j=e=>{switch(null==e?void 0:e.toLowerCase()){case"diamond":return"from-blue-500 to-purple-600";case"gold":return"from-yellow-500 to-orange-500";case"silver":default:return"from-gray-400 to-gray-600";case"bronze":return"from-orange-600 to-red-600"}},f=e=>{switch(null==e?void 0:e.toLowerCase()){case"diamond":return"\uD83D\uDC8E";case"gold":return"\uD83E\uDD47";case"silver":return"\uD83E\uDD48";case"bronze":return"\uD83E\uDD49";default:return"\uD83C\uDFC6"}};return h?(0,a.jsx)("div",{className:"animate-pulse ".concat(o),children:(0,a.jsx)("div",{className:"bg-gray-200 h-6 w-32 rounded"})}):x&&x.success&&!(x.bonusAmount<=0)?m?(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"inline-flex items-center space-x-2 px-4 py-2 bg-gradient-to-r ".concat(j(x.userRank)," text-white rounded-full text-sm font-bold shadow-lg ").concat(o),children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[f(x.userRank)," +",b(x.totalAmount||x.bonusAmount)," SOV"]}),(0,a.jsxs)("span",{className:"text-xs opacity-80",children:["(",x.multiplier,"x)"]})]}):(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-300 rounded-xl p-6 shadow-lg ".concat(o),children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r ".concat(j(x.userRank)," rounded-full flex items-center justify-center text-white text-xl shadow-lg"),children:(0,a.jsx)(i.Z,{className:"w-6 h-6"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsxs)("h4",{className:"text-lg font-bold text-green-800",children:[f(x.userRank)," ",x.userRank," Bonus"]}),(0,a.jsxs)("span",{className:"text-sm text-white bg-gradient-to-r from-green-500 to-blue-500 px-3 py-1 rounded-full font-bold",children:[x.multiplier,"x Multiplier"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Base Reward"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:[b(x.baseAmount||Math.floor(x.bonusAmount/(x.multiplier-1)))," SOV"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Bonus"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["+",b(x.bonusAmount)," SOV"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[b(x.totalAmount||x.bonusAmount)," SOV"]})]})]})}),(0,a.jsx)("p",{className:"text-sm text-green-600 mt-3 font-medium",children:x.message||"\uD83C\uDF89 Bạn sẽ nhận được ".concat(b(x.totalAmount||x.bonusAmount)," SOV với rank ").concat(x.userRank,"!")})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-green-200",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Service:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-800",children:s.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Amount:"}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800",children:[d.toLocaleString()," VND"]})]})]})})]}):null}},3509:function(e,s,t){"use strict";var a=t(3119);t(9493);var l=t(7549),r=t(7567);s.Z=e=>{let{serviceType:s,amount:t,category:n,position:i="inline",size:c="medium"}=e;return t<=0?null:(0,a.jsx)(l.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"".concat((()=>{switch(i){case"top":return"mb-4";case"bottom":return"mt-4";default:return"my-4"}})()," ").concat((()=>{switch(c){case"small":return"text-sm";case"large":return"text-lg";default:return"text-base"}})()),children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm",children:"\uD83C\uDF81"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:"Token Rewards Available"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Earn SOV tokens with this purchase"})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(r.Z,{serviceType:s,amount:t,category:n,compact:!0})})]})})})}},9117:function(e,s,t){"use strict";var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"}))});s.Z=l},9409:function(e,s,t){"use strict";var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))});s.Z=l},1260:function(e,s,t){"use strict";var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"}))});s.Z=l},52:function(e,s,t){"use strict";var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 109.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1114.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"}))});s.Z=l},2419:function(e,s,t){"use strict";var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}))});s.Z=l},9566:function(e,s,t){"use strict";var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))});s.Z=l}},function(e){e.O(0,[412,131,403,269,542,847,614,744],function(){return e(e.s=1906)}),_N_E=e.O()}]);