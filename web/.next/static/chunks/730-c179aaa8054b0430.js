"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{730:function(e,s,t){t.d(s,{Z:function(){return j}});var a=t(3119),l=t(9493),r=t(7549),n=t(6981),c=t(1991),i=t(8742),d=t(4272),o=t(9903),x=t(842),h=t(1122);let m=l.forwardRef(function({title:e,titleId:s,...t},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":s},t),e?l.createElement("title",{id:s},e):null,l.createElement("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071-.136 9.742 9.742 0 00-3.539 6.177A7.547 7.547 0 016.648 6.61a.75.75 0 00-1.152-.082A9 9 0 1015.68 4.534a7.46 7.46 0 01-2.717-2.248zM15.75 14.25a3.75 3.75 0 11-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 011.925-3.545 3.75 3.75 0 013.255 3.717z",clipRule:"evenodd"}))});var u=t(6175),g=t(3599);let p=e=>{let{iconName:s,className:t}=e,l={user:u.Z,medal:g.Z,award:c.Z,star:i.Z,crown:c.Z,gem:d.Z},r=l[s]||i.Z;return(0,a.jsx)(r,{className:t})};function j(e){let{onTierUpdate:s}=e,[t,i]=(0,l.useState)(null),[u,g]=(0,l.useState)(!0),[j,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{b()},[]);let b=async()=>{try{var e;let t=null===(e=document.cookie.split("; ").find(e=>e.startsWith("authToken=")))||void 0===e?void 0:e.split("=")[1],a=await fetch("/api/enhanced-payments/loyalty/dashboard",{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(a.ok){let e=await a.json();i(e.dashboard),s&&s(e.dashboard.currentTier)}}catch(e){console.error("Failed to fetch loyalty data:",e)}finally{g(!1)}},v=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),f=e=>new Intl.NumberFormat("vi-VN",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e);if(u)return(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,a.jsx)("div",{className:"h-16 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})});if(!t)return(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng thể tải th\xf4ng tin hạng th\xe0nh vi\xean"})});let{currentTier:y,nextTier:w,memberStats:k,recentBenefits:E,achievementProgress:Z}=t;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative overflow-hidden rounded-2xl shadow-2xl",style:{background:"linear-gradient(135deg, ".concat(y.color,"20 0%, ").concat(y.color,"40 100%)")},children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-10",children:(0,a.jsx)(p,{iconName:y.icon,className:"w-full h-full"})}),(0,a.jsxs)("div",{className:"relative p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center shadow-lg",style:{backgroundColor:y.color},children:(0,a.jsx)(p,{iconName:y.icon,className:"w-8 h-8 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:y.name}),(0,a.jsx)("p",{className:"text-gray-600",children:"Hạng th\xe0nh vi\xean hiện tại"})]})]}),(0,a.jsx)("button",{onClick:()=>N(!j),className:"px-4 py-2 bg-white/80 backdrop-blur-sm rounded-lg hover:bg-white/90 transition-colors",children:j?"Ẩn chi tiết":"Xem chi tiết"})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-orange-500"}),(0,a.jsx)("span",{className:"font-semibold",children:"Bonus Token"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",style:{color:y.color},children:["+",y.tokenBonusPercentage,"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Khi mua dịch vụ"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5 text-purple-500"}),(0,a.jsx)("span",{className:"font-semibold",children:"Hệ số nh\xe2n"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",style:{color:y.color},children:["x",y.bonusMultiplier]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Điểm t\xedch lũy"})]}),(0,a.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-green-500"}),(0,a.jsx)("span",{className:"font-semibold",children:"Ưu đ\xe3i"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",style:{color:y.color},children:[y.level-1,"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Giảm gi\xe1 theo hạng"})]})]}),"Tối đa"!==w.name&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Tiến độ l\xean hạng ",w.name]}),(0,a.jsxs)("span",{className:"text-sm font-bold",style:{color:y.color},children:[w.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,a.jsx)(r.E.div,{initial:{width:0},animate:{width:"".concat(w.progress,"%")},transition:{duration:1,ease:"easeOut"},className:"h-3 rounded-full",style:{backgroundColor:y.color}})})]})]})]}),(0,a.jsx)(n.M,{children:j&&(0,a.jsxs)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-6 h-6 mr-2 text-blue-500"}),"Thống k\xea th\xe0nh vi\xean"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:k.daysAsMember}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ng\xe0y tham gia"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:v(k.totalSpent)}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Tổng chi ti\xeau"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:k.totalTransactions}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Giao dịch"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[f(k.totalBonusEarned)," SOV"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Bonus nhận được"})]})]})]}),E.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(m,{className:"w-6 h-6 mr-2 text-red-500"}),"Ưu đ\xe3i gần đ\xe2y"]}),(0,a.jsx)("div",{className:"space-y-3",children:E.slice(0,5).map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:null===(t=e.service)||void 0===t?void 0:t.toUpperCase()}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.date).toLocaleDateString("vi-VN")})]}),(0,a.jsxs)("div",{className:"text-right",children:[e.bonus_tokens>0&&(0,a.jsxs)("p",{className:"text-green-600 font-bold",children:["+",f(e.bonus_tokens)," SOV"]}),e.discount>0&&(0,a.jsxs)("p",{className:"text-blue-600 font-bold",children:["-",v(e.discount)]})]})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Th\xe0nh t\xedch"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Z).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"p-4 rounded-xl border-2 ".concat(t?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full mx-auto mb-2 flex items-center justify-center ".concat(t?"bg-green-500":"bg-gray-300"),children:(0,a.jsx)(c.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("p",{className:"text-sm text-center font-medium ".concat(t?"text-green-700":"text-gray-500"),children:["loyalty_champion"===s&&"Nh\xe0 v\xf4 địch","early_adopter"===s&&"Người ti\xean phong","big_spender"===s&&"Kh\xe1ch VIP","frequent_user"===s&&"Người d\xf9ng t\xedch cực"]})]},s)})})]})]})})]})}},1122:function(e,s,t){var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75zM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 01-1.875-1.875V8.625zM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 013 19.875v-6.75z"}))});s.Z=l},1991:function(e,s,t){var a=t(9493);let l=a.forwardRef(function({title:e,titleId:s,...t},l){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:l,"aria-labelledby":s},t),e?a.createElement("title",{id:s},e):null,a.createElement("path",{fillRule:"evenodd",d:"M5.166 2.621v.858c-1.035.148-2.059.33-3.071.543a.75.75 0 00-.584.859 6.753 6.753 0 006.138 5.6 6.73 6.73 0 002.743 1.346A6.707 6.707 0 019.279 15H8.54c-1.036 0-1.875.84-1.875 1.875V19.5h-.75a2.25 2.25 0 00-2.25 2.25c0 .414.336.75.75.75h15a.75.75 0 00.75-.75 2.25 2.25 0 00-2.25-2.25h-.75v-2.625c0-1.036-.84-1.875-1.875-1.875h-.739a6.706 6.706 0 01-1.112-3.173 6.73 6.73 0 002.743-1.347 6.753 6.753 0 006.139-5.6.75.75 0 00-.585-.858 47.077 47.077 0 00-3.07-.543V2.62a.75.75 0 00-.658-.744 49.22 49.22 0 00-6.093-.377c-2.063 0-4.096.128-6.093.377a.75.75 0 00-.657.744zm0 2.629c0 1.196.312 2.32.857 3.294A5.266 5.266 0 013.16 5.337a45.6 45.6 0 012.006-.343v.256zm13.5 0v-.256c.674.1 1.343.214 2.006.343a5.265 5.265 0 01-2.863 3.207 6.72 6.72 0 00.857-3.294z",clipRule:"evenodd"}))});s.Z=l}}]);